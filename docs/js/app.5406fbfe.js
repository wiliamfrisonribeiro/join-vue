(function(t){function e(e){for(var o,i,s=e[0],l=e[1],c=e[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var o={},a={app:0},r=[];function i(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("router-view")],1)},r=[],i={name:"App",data:function(){return{}}},s=i,l=n("2877"),c=n("6544"),u=n.n(c),d=n("7496"),p=Object(l["a"])(s,a,r,!1,null,null,null),h=p.exports;u()(p,{VApp:d["a"]});var v=n("8c4f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("app-bar",{attrs:{controller:t.controller}}),n("v-main",{staticStyle:{height:"100vh"}},[n("filter-stations",{attrs:{controller:t.controller}}),n("div",{attrs:{id:"map"}}),n("popup-station",{staticClass:"popup-container",attrs:{controller:t.controller}}),n("v-snackbar",{attrs:{timeout:5e3,color:"red"},scopedSlots:t._u([{key:"action",fn:function(e){var o=e.attrs;return[n("v-btn",t._b({attrs:{icon:""},on:{click:function(e){t.controller.snackbar=!1}}},"v-btn",o,!1),[n("v-icon",{attrs:{color:"red"}},[t._v("mdi-close")])],1)]}}]),model:{value:t.controller.snackbar,callback:function(e){t.$set(t.controller,"snackbar",e)},expression:"controller.snackbar"}},[t._v(" "+t._s(t.controller.message)+" ")])],1)],1)},m=[],b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{app:"",color:"cyan lighte-1",height:"80"}},[n("div",[n("v-img",{attrs:{contain:"",src:"/logo.png","max-width":"130","max-height":"85"}})],1),n("v-spacer"),n("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[n("v-btn",t._g({attrs:{icon:"",href:"https://github.com/wiliamfrisonribeiro/join-vue",color:"white"}},o),[n("v-icon",[t._v("mdi-github")])],1)]}}])},[n("span",[t._v("Github")])])],1)},g=[],y={name:"AppBar",props:{controller:{type:Object,required:!0}}},S=y,x=n("40dc"),w=n("8336"),O=n("132d"),k=n("adda"),T=n("2fa4"),_=n("3a2f"),j=Object(l["a"])(S,b,g,!1,null,null,null),V=j.exports;u()(j,{VAppBar:x["a"],VBtn:w["a"],VIcon:O["a"],VImg:k["a"],VSpacer:T["a"],VTooltip:_["a"]});var C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"popup-container",attrs:{width:"500"}},[n("v-card-title",{attrs:{id:"card-title"}},[t._v("Dados da Estação")]),n("v-card-text",[n("v-row",[n("v-col",{staticClass:"pt-0",attrs:{cols:"3",sm:"3"}},[n("v-text-field",{attrs:{label:"ID",dense:"",outlined:"",readonly:""},model:{value:t.controller.station.id,callback:function(e){t.$set(t.controller.station,"id",e)},expression:"controller.station.id"}})],1),n("v-col",{staticClass:"pt-0",attrs:{cols:"9",sm:"9"}},[n("v-text-field",{attrs:{label:"Name",outlined:"",readonly:"",dense:""},model:{value:t.controller.station.name,callback:function(e){t.$set(t.controller.station,"name",e)},expression:"controller.station.name"}})],1),n("v-col",{staticClass:"pt-0",attrs:{cols:"6",sm:"6"}},[n("v-text-field",{attrs:{outlined:"",readonly:"",dense:"",label:"Longitude"},model:{value:t.controller.station.longitude,callback:function(e){t.$set(t.controller.station,"longitude",e)},expression:"controller.station.longitude"}})],1),n("v-col",{staticClass:"pt-0",attrs:{cols:"6",sm:"6"}},[n("v-text-field",{attrs:{outlined:"",dense:"",readonly:"",label:"Longitude"},model:{value:t.controller.station.longitude,callback:function(e){t.$set(t.controller.station,"longitude",e)},expression:"controller.station.longitude"}})],1),n("v-col",{staticClass:"pt-0",attrs:{cols:"5",sm:"6 "}},[n("v-text-field",{attrs:{outlined:"",readonly:"",dense:"","append-icon":"mdi-calendar-range",label:"Inicio de Operação"},model:{value:t.controller.station.initOperetion,callback:function(e){t.$set(t.controller.station,"initOperetion",e)},expression:"controller.station.initOperetion"}})],1),n("v-col",{staticClass:"pt-0",attrs:{cols:"6",sm:"6"}},[n("v-text-field",{attrs:{outlined:"",readonly:"",dense:"","append-icon":"mdi-calendar-range",label:"Fim de Operação"},model:{value:t.controller.station.endOperetion,callback:function(e){t.$set(t.controller.station,"endOperetion",e)},expression:"controller.station.endOperetion"}})],1),n("v-col",{staticClass:"pt-0",attrs:{cols:"4"}},[n("v-text-field",{attrs:{outlined:"",label:"Elevação",dense:"",readonly:""},model:{value:t.controller.station.elevation,callback:function(e){t.$set(t.controller.station,"elevation",e)},expression:"controller.station.elevation"}})],1),n("v-col",{staticClass:"py-0 pt-0",attrs:{cols:"8"}},[n("v-text-field",{attrs:{outlined:"",dense:"",readonly:"",label:"Tipo Estação"},model:{value:t.controller.station.stationType,callback:function(e){t.$set(t.controller.station,"stationType",e)},expression:"controller.station.stationType"}})],1)],1)],1)],1)},E=[],L={name:"popup-station",props:{controller:{type:Object,required:!0}}},$=L,F=n("b0af"),I=n("99d9"),R=n("62ad"),M=n("0fd9"),P=n("8654"),A=Object(l["a"])($,C,E,!1,null,null,null),D=A.exports;u()(A,{VCard:F["a"],VCardText:I["b"],VCardTitle:I["c"],VCol:R["a"],VRow:M["a"],VTextField:P["a"]});var G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"filter"}},[n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-card",{attrs:{width:"500"}},[n("v-card-title",{staticClass:"headline grey lighten-2"},[t._v(" Filtros "),n("v-spacer"),n("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,a=e.attrs;return[n("v-btn",t._g(t._b({attrs:{text:"",fab:""},on:{click:function(e){t.controller.expand=!t.controller.expand}}},"v-btn",a,!1),o),[!0===t.controller.expand?n("v-icon",{attrs:{large:""}},[t._v("mdi-arrow-collapse-vertical")]):n("v-icon",{attrs:{large:""}},[t._v("mdi-chevron-down")])],1)]}}])},[!0===t.controller.expand?n("strong",[t._v("Esconder Filtros")]):n("strong",[t._v("Mostrar Filtros")])])],1),n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:t.controller.expand,expression:"controller.expand"}]},[n("br"),n("v-autocomplete",{attrs:{items:t.controller.stationTypeList,label:"Tipos de Estações",clearable:"","item-text":"name","item-value":"name",multiple:"","small-chips":"",outlined:"","return-object":"","deletable-chips":"","no-data-text":"Sem dados","persistent-hint":"",required:"",rules:[function(t){return!!t||"Preencha o Tipo das Estações"}],hint:t.controller.stationsTypesSelected.length+" Opções Selecionadas"},scopedSlots:t._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{attrs:{ripple:""},on:{mousedown:function(t){t.preventDefault()},click:function(e){return t.controller.toggleStationType()}}},[n("v-list-item-action",[n("v-icon",{attrs:{color:t.controller.stationsTypesSelected.length>0?"indigo darken-4":""}},[t._v(" "+t._s(t.controller.iconStationType())+" ")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Todos ")])],1)],1),n("v-divider",{staticClass:"mt-2"})]},proxy:!0}]),model:{value:t.controller.stationsTypesSelected,callback:function(e){t.$set(t.controller,"stationsTypesSelected",e)},expression:"controller.stationsTypesSelected"}}),n("v-autocomplete",{attrs:{items:t.controller.stations,"item-text":"name","item-value":"name",label:"Estações",multiple:"","small-chips":"",outlined:"","deletable-chips":"",clearable:"",disabled:!t.controller.stationsTypesSelected.length>0,"hide-details":!t.controller.stationsTypesSelected.length>0,"persistent-hint":t.controller.stationsTypesSelected.length>0,hint:t.controller.stationsTypesSelected.length+" Opções Selecionadas","return-object":"","no-data-text":"Sem dados",rules:[function(t){return!!t||"Preencha as Estações"}]},scopedSlots:t._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{attrs:{ripple:""},on:{mousedown:function(t){t.preventDefault()},click:function(e){return t.controller.toggleStations()}}},[n("v-list-item-action",[n("v-icon",{attrs:{color:t.controller.stationsTypesSelected.length>0?"indigo darken-4":""}},[t._v(" "+t._s(t.controller.iconStations())+" ")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(" Todos ")])],1)],1),n("v-divider",{staticClass:"mt-2"})]},proxy:!0}]),model:{value:t.controller.stationsSelected,callback:function(e){t.$set(t.controller,"stationsSelected",e)},expression:"controller.stationsSelected"}}),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.controller.stationsTypesSelected.length>0,expression:"!controller.stationsTypesSelected.length > 0"}],staticStyle:{color:"red"}},[t._v("*selecione pelo menos 1 tipo de estação para desbloquear o seletor de estações")])],1),n("v-divider"),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"cyan lighte-1",dark:"",block:"",loading:t.controller.loading},on:{click:function(e){return t.controller.consulting()}}},[n("v-icon",{attrs:{left:"",color:"white"}},[t._v(" mdi-magnify")]),t._v("Consultar")],1),n("v-spacer")],1)],1)],1)],1)],1)},Y=[],N={name:"filter-station",props:{controller:{type:Object,required:!0}},watch:{"controller.stationsTypesSelected":function(){this.controller.change()}},mounted:function(){this.controller.contextFilter=this}},q=N,B=(n("8cc0"),n("c6a6")),J=n("a523"),z=n("ce7e"),H=n("da13"),U=n("1800"),K=n("5d23"),Q=Object(l["a"])(q,G,Y,!1,null,null,null),W=Q.exports;u()(Q,{VAutocomplete:B["a"],VBtn:w["a"],VCard:F["a"],VCardActions:I["a"],VCardText:I["b"],VCardTitle:I["c"],VContainer:J["a"],VDivider:z["a"],VIcon:O["a"],VListItem:H["a"],VListItemAction:U["a"],VListItemContent:K["a"],VListItemTitle:K["b"],VRow:M["a"],VSpacer:T["a"],VTooltip:_["a"]});var X=n("1da1"),Z=n("d4ec"),tt=n("bee2"),et=n("ade3"),nt=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("159b"),n("b0c0"),n("d81d"),n("fb6a"),function(){function t(){Object(Z["a"])(this,t)}return Object(tt["a"])(t,[{key:"searchFeatures",value:function(){var t=fetch("https://raw.githubusercontent.com/wiliamfrisonribeiro/geojson/master/station_list.geojson").then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){throw t}));return t}},{key:"serchStation",value:function(){var t=fetch("https://raw.githubusercontent.com/wiliamfrisonribeiro/geojson/master/station.json").then((function(t){return t.json()})).then((function(t){return t.station})).catch((function(t){throw t}));return t}},{key:"searchStationType",value:function(){var t=fetch("https://raw.githubusercontent.com/wiliamfrisonribeiro/geojson/master/station_type.json").then((function(t){return t.json()})).then((function(t){return t.station_type})).catch((function(t){throw t}));return t}}]),t}()),ot=nt,at=n("a2e1"),rt=n("5eee"),it=n("a2c7"),st=n("21bc"),lt=n("9d47"),ct=n("3e6b"),ut=n("480c"),dt=n("5831"),pt=n("d0e9"),ht=n("0710"),vt=n("6c77"),ft=n("6cbf"),mt=n("5a0c"),bt=n.n(mt),gt=function(){function t(e){Object(Z["a"])(this,t),Object(et["a"])(this,"stationsTypesSelected",[]),Object(et["a"])(this,"stationsSelected",[]),Object(et["a"])(this,"stationList",[]),Object(et["a"])(this,"stationTypeList",[]),Object(et["a"])(this,"stations",[]),Object(et["a"])(this,"geojson",null),Object(et["a"])(this,"context",null),Object(et["a"])(this,"contextFilter",null),Object(et["a"])(this,"vectorGeoJSON",null),Object(et["a"])(this,"message",null),Object(et["a"])(this,"source",new dt["a"]),Object(et["a"])(this,"station",{}),Object(et["a"])(this,"drawer",!1),Object(et["a"])(this,"snackbar",!1),Object(et["a"])(this,"loading",!1),Object(et["a"])(this,"expand",!1),this.context=e}return Object(tt["a"])(t,[{key:"created",value:function(){var t=Object(X["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Promise.all([this.searchFeatures(),this.searchStation(),this.searchStationType()]);case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"searchFeatures",value:function(){var t=Object(X["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new ot,t.next=3,e.searchFeatures();case 3:this.geojson=t.sent;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"searchStation",value:function(){var t=Object(X["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new ot,t.next=3,e.serchStation();case 3:this.stationList=t.sent;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"searchStationType",value:function(){var t=Object(X["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new ot,t.next=3,e.searchStationType();case 3:this.stationTypeList=t.sent,console.log(this.stationTypeList);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"change",value:function(){var t=this;this.stations=[],this.stationsTypesSelected.forEach((function(e){t.stationList.forEach((function(n){e.id==n.station_type_id&&t.stations.push(n)}))})),console.log(this.stations)}},{key:"initMap",value:function(){var t=new dt["a"],e=new ct["a"]({source:t}),o=new ut["a"]({source:new pt["a"]});this.vectorGeoJSON=new ct["a"]({source:this.source,style:function(t){return[new vt["b"]({image:new ft["a"]({scale:.9,color:"1"==t.get("station_type_id")?"#7cb5ec":"2"==t.get("station_type_id")?"#434348":"3"==t.get("station_type_id")?"#90ed7d":"4"==t.get("station_type_id")?"#f7a35c":"#8085e9",src:n("7fb4")})})]}});var a=new rt["a"]({controls:Object(st["a"])().extend([new lt["a"]({units:"degrees"})]),target:"map",layers:[o,e,this.vectorGeoJSON],view:new it["a"]({projection:"EPSG:4326",center:[-49.276855,-25.441105],zoom:8})}),r=document.querySelector(".popup-container"),i=new ht["a"]({element:r});a.addOverlay(i);var s={id:null,name:null,stationType:null,latitude:null,elevation:null,longitude:null,initOperetion:null,fintOperetion:null},l=[{id:"1",name:"AGROMETEOROLOGICAL",color:"#7cb5ec"},{id:"2",name:"CLIMATOLÓGICO",color:"#434348"},{id:"3",color:"#90ed7d"},{id:"4",name:"HIDROMÉTRICO",color:"#f7a35c"},{id:"5",name:"PLUVIOMETRIC",color:"#8085e9"}];this.station=s,a.on("click",(function(t){i.setPosition(void 0),a.forEachFeatureAtPixel(t.pixel,(function(e){i.setPosition(t.coordinate),s.id=e.get("id"),s.name=e.get("name"),s.latitude=e.get("latitude"),s.longitude=e.get("longitude"),s.elevation=e.get("elevation_meters"),s.initOperetion=bt()(e.get("operation_start_date")).format("DD/MM/YYYY"),s.endOperetion=bt()(e.get("operation_end_date")).format("DD/MM/YYYY"),l.forEach((function(t){e.get("station_type_id")==t.id&&(s.stationType=t.name)}))}))}))}},{key:"consulting",value:function(){var t=Object(X["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,t.next=4,this.searchFeatures();case 4:e=[],this.geojson.features.forEach((function(t){n.stationsSelected.map((function(n){t.properties.id===n.id&&e.push(t)}))})),this.geojson.features=e,this.geojson.features.length>0?(this.source.clear(),this.source.addFeatures((new at["a"]).readFeatures(this.geojson)),this.drawer=!1):(this.snackbar=!0,this.source.clear(),this.message="Nenhuma estação encontrada."),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](0),this.message=t.t0,this.snackbar=!0;case 14:return t.prev=14,this.loading=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[0,10,14,17]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"allStationTypes",value:function(){return this.stationsTypesSelected.length===this.stationTypeList.length}},{key:"someTypesStation",value:function(){return this.stationsTypesSelected.length>0&&!this.allStationTypes()}},{key:"iconStationType",value:function(){return this.allStationTypes()?"mdi-close-box":this.someTypesStation()?"mdi-minus-box":"mdi-checkbox-blank-outline"}},{key:"toggleStationType",value:function(){var t=this;this.contextFilter.$nextTick((function(){t.allStationTypes()?t.stationsTypesSelected=[]:t.stationsTypesSelected=t.stationTypeList.slice()}))}},{key:"allStations",value:function(){return this.stationsSelected.length===this.stations.length}},{key:"someStations",value:function(){return this.stationsSelected.length>0&&!this.allStations()}},{key:"iconStations",value:function(){return this.allStations()?"mdi-close-box":this.someStations()?"mdi-minus-box":"mdi-checkbox-blank-outline"}},{key:"toggleStations",value:function(){var t=this;this.contextFilter.$nextTick((function(){t.allStations()?t.stationsSelected=[]:t.stationsSelected=t.stations.slice()}))}}]),t}(),yt=gt,St={name:"App",components:{AppBar:V,FilterStations:W,PopupStation:D},data:function(t){return{controller:new yt(t)}},created:function(){this.controller.created()},mounted:function(){this.controller.initMap()}},xt=St,wt=(n("cccb"),n("f6c4")),Ot=n("2db4"),kt=Object(l["a"])(xt,f,m,!1,null,null,null),Tt=kt.exports;u()(kt,{VBtn:w["a"],VIcon:O["a"],VMain:wt["a"],VSnackbar:Ot["a"]}),o["a"].use(v["a"]);var _t=[{path:"/",name:"home",component:Tt}],jt=new v["a"]({mode:"history",base:"/",routes:_t}),Vt=jt,Ct=n("f309");o["a"].use(Ct["a"]);var Et=new Ct["a"]({});o["a"].config.productionTip=!1,new o["a"]({router:Vt,vuetify:Et,render:function(t){return t(h)}}).$mount("#app")},"5ced":function(t,e,n){},"7fb4":function(t,e,n){t.exports=n.p+"img/location_on-white-48dp.2d4a2979.svg"},"8cc0":function(t,e,n){"use strict";n("ddf5")},cccb:function(t,e,n){"use strict";n("5ced")},ddf5:function(t,e,n){}});
//# sourceMappingURL=app.5406fbfe.js.map